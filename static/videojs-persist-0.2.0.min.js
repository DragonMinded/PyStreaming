/*! @name videojs-persist @version 0.2.0 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsPersist=t(e.videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e);const o={muted:!0,playbackRate:!0,volume:!0,restoreUnsupportedRate:!1,key:"videojs-persist"},s=function(e){(()=>{const e="videojs-persist-test-"+Math.floor(10*Math.random());try{return window.localStorage.setItem(e,"."),window.localStorage.removeItem(e),!0}catch(e){return!1}})()?this.ready((()=>{((e,t)=>{e.addClass("vjs-persist");const a=e.playbackRates?e.playbackRates():e.options_.playbackRates||[],o=JSON.parse(window.localStorage.getItem(t.key))||{};["playbackRate","volume","muted"].forEach((s=>{if(!t[s])return;const l=o[s];if(l){if("playbackRate"===s&&!t.restoreUnsupportedRate&&!a.includes(l))return;e[s](l)}})),t.playbackRate&&e.on("ratechange",(()=>{e.defaultPlaybackRate(e.playbackRate()),o.playbackRate=e.playbackRate(),window.localStorage.setItem(t.key,JSON.stringify(o))})),(t.muted||t.volume)&&e.on("volumechange",(()=>{t.muted&&(e.defaultMuted(e.muted()),o.muted=e.muted()),t.volume&&(o.volume=e.volume()),window.localStorage.setItem(t.key,JSON.stringify(o))}))})(this,(a.default.obj?a.default.obj.merge:a.default.mergeOptions)(o,e))})):a.default.log("videojs-persist aborted. localStorage not available.")};return a.default.registerPlugin("persist",s),s.VERSION="0.2.0",s}));
